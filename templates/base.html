<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}H&O Parcel Scans{% endblock %}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-main': '#f9fafa',
            'bg-surface': '#FFFFFF',
            'text-main': '#070e31',
            'text-muted': '#141f3d',
            'accent': '#f97f67',
            'secondary': '#516aec',
            'border-color': '#E2E8E6',
            'cancel-btn': '#E57373',
            'send-btn': '#6B9E92',
            // Age colors for orders
            'age-fresh': '#199b76',
            'age-medium': '#f39c12',
            'age-old': '#c62828',
          },
          fontFamily: {
            'sans': ['Figtree', 'sans-serif'],
          },
        }
      }
    }
  </script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <style>
    {% block extra_styles %}{% endblock %}
  </style>
</head>
<body class="bg-bg-main font-sans text-text-main">

  <div class="flex h-screen w-full overflow-hidden">

    <!-- ── SIDEBAR ── -->
    <div class="sidebar hidden md:flex w-64 flex-col justify-between flex-shrink-0 bg-bg-surface border-r border-border-color transition-colors duration-300">
      <div class="overflow-y-auto">
        <!-- Logo Area -->
        <div class="p-6 pb-8">
          <div class="flex items-center gap-2.5 font-bold text-xl tracking-tight text-text-main">
            <div class="relative flex items-center justify-center w-9 h-9 rounded-xl text-white shadow-lg bg-secondary">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                <path fill-rule="evenodd" d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 3.682 2.937l.145.083ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" />
              </svg>
            </div>
            WAYPOST
          </div>
          <p class="text-[11px] font-medium mt-1.5 pl-1 uppercase tracking-wider text-text-muted opacity-70">
            Logistics Dashboard
          </p>
        </div>

        <!-- Navigation -->
        <nav class="px-4">
          <div class="text-[10px] font-bold uppercase tracking-widest px-4 mb-3 text-text-muted opacity-60">
            Operations
          </div>
          <ul class="space-y-1">
            <li>
              <a href="{{ url_for('new_batch') }}"
                 class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group {% if active_page == 'new_batch' %}bg-accent/15 text-accent{% else %}text-text-muted hover:bg-bg-main{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px] {% if active_page == 'new_batch' %}text-accent{% endif %}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect width="7" height="9" x="3" y="3" rx="1" /><rect width="7" height="5" x="14" y="3" rx="1" /><rect width="7" height="9" x="14" y="12" rx="1" /><rect width="7" height="5" x="3" y="16" rx="1" />
                </svg>
                <span class="text-sm tracking-wide">New Batch</span>
              </a>
            </li>
            <li>
              <a href="{{ url_for('all_batches') }}"
                 class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group {% if active_page == 'all_batches' %}bg-accent/15 text-accent{% else %}text-text-muted hover:bg-bg-main{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px] {% if active_page == 'all_batches' %}text-accent{% endif %}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="m7.5 4.27 9 5.15" /><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z" /><path d="m3.3 7 8.7 5 8.7-5" /><path d="M12 22V12" />
                </svg>
                <span class="text-sm tracking-wide">Batches</span>
              </a>
            </li>
            <li>
              <a href="{{ url_for('all_orders') }}"
                 class="sidebar-item flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 group {% if active_page == 'all_orders' %}bg-accent/15 text-accent{% else %}text-text-muted hover:bg-bg-main{% endif %}">
                <div class="flex items-center gap-3">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px] {% if active_page == 'all_orders' %}text-accent{% endif %}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m7.5 4.27 9 5.15" /><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z" /><path d="m3.3 7 8.7 5 8.7-5" /><path d="M12 22V12" />
                  </svg>
                  <span class="text-sm tracking-wide">All Orders</span>
                </div>
              </a>
            </li>
            <li>
              <a href="{{ url_for('all_scans') }}"
                 class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group {% if active_page == 'all_scans' %}bg-accent/15 text-accent{% else %}text-text-muted hover:bg-bg-main{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px] {% if active_page == 'all_scans' %}text-accent{% endif %}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 7V5a2 2 0 0 1 2-2h2" /><path d="M17 3h2a2 2 0 0 1 2 2v2" /><path d="M21 17v2a2 2 0 0 1-2 2h-2" /><path d="M7 21H5a2 2 0 0 1-2-2v-2" /><line x1="7" x2="17" y1="12" y2="12" />
                </svg>
                <span class="text-sm tracking-wide">All Scans</span>
              </a>
            </li>
          </ul>

          <div class="text-[10px] font-bold uppercase tracking-widest px-4 mb-3 mt-8 text-text-muted opacity-60">
            Logistics
          </div>
          <ul class="space-y-1">
            <li>
              <a href="{{ url_for('stuck_orders') }}"
                 class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group {% if active_page == 'stuck_orders' %}bg-accent/15 text-accent{% else %}text-text-muted hover:bg-bg-main{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px] {% if active_page == 'stuck_orders' %}text-accent{% endif %}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10" /><line x1="12" x2="12" y1="8" y2="12" /><line x1="12" x2="12.01" y1="16" y2="16" />
                </svg>
                <span class="text-sm tracking-wide">Fix Stuck Orders</span>
              </a>
            </li>
            <li>
              <a href="{{ url_for('pick_and_pack') }}"
                 class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group {% if active_page == 'pick_and_pack' %}bg-accent/15 text-accent{% else %}text-text-muted hover:bg-bg-main{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px] {% if active_page == 'pick_and_pack' %}text-accent{% endif %}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" />
                </svg>
                <span class="text-sm tracking-wide">Pick and Pack</span>
              </a>
            </li>
            <li>
              <a href="{{ url_for('item_locations') }}"
                 class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group {% if active_page == 'item_locations' %}bg-accent/15 text-accent{% else %}text-text-muted hover:bg-bg-main{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px] {% if active_page == 'item_locations' %}text-accent{% endif %}" viewBox="0 0 24 24" fill="currentColor">
                  <path fill-rule="evenodd" d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 3.682 2.937l.145.083ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" />
                </svg>
                <span class="text-sm tracking-wide">Item Locations</span>
              </a>
            </li>
            <li>
              <a href="{{ url_for('check_shipments') }}"
                 class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group {% if active_page == 'check_shipments' %}bg-accent/15 text-accent{% else %}text-text-muted hover:bg-bg-main{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px] {% if active_page == 'check_shipments' %}text-accent{% endif %}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="2" /><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14" />
                </svg>
                <span class="text-sm tracking-wide">Live Tracking</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <!-- Footer -->
      <div class="p-4 border-t border-border-color">
        <a href="{{ url_for('logout') }}"
           class="flex items-center gap-3 text-sm font-medium w-full px-4 py-2.5 rounded-xl transition-all group text-text-muted hover:bg-cancel-btn/10 hover:text-cancel-btn">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 group-hover:translate-x-1 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" /><polyline points="16 17 21 12 16 7" /><line x1="21" x2="9" y1="12" y2="12" />
          </svg>
          Log Out
        </a>
        <div class="mt-3 pt-3 border-t border-border-color text-[11px] text-text-muted/50 text-center">
          v{{ version }}
        </div>
      </div>
    </div>
    <!-- ── END SIDEBAR ── -->


    <!-- ── MAIN CONTENT ── -->
    <div class="main-content flex-1 flex flex-col min-w-0 bg-bg-main transition-colors duration-300">

      <div id="flash-container" class="px-4 md:px-8 pt-4">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% for category, msg in messages %}
            <div class="flash {{ category }} rounded-xl px-4 py-3 mb-4 border animate-slideIn">{{ msg }}</div>
          {% endfor %}
        {% endwith %}
      </div>

      <main class="flex-1 overflow-y-auto px-4 md:px-8 pb-8">
        {% block content %}{% endblock %}
      </main>

    </div>
    <!-- ── END MAIN CONTENT ── -->

  </div>

  {% block scripts %}{% endblock %}

</body>
</html>
